<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>What Is My Timezone?</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body { margin:0; font-family: sans-serif; }
    #map { height: 100vh; }
    #info { position: absolute; top: 10px; left: 10px; background: white; padding: 15px; border-radius: 8px; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <div id="info">Click "Allow" for location</div>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/timezonecomplete@2.6.0/dist/timezonecomplete.min.js"></script>
  <script>
    const map = L.map('map');
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    if (!navigator.geolocation) {
      document.getElementById('info').textContent = 'Geolocation not supported';
      return;
    }

    navigator.geolocation.getCurrentPosition(pos => {
      const { latitude, longitude } = pos.coords;
      map.setView([latitude, longitude], 10);
      L.marker([latitude, longitude]).addTo(map).bindPopup('You are here').openPopup();

      const tz = timezonecomplete.at({ latitude, longitude }).zone.name;
      const now = new Date();
      const localTime = timezonecomplete.atUtc(now).toZone(tz).toString();
      
      document.getElementById('info').innerHTML = `
        <strong>üó∫Ô∏è Your Location</strong><br>
        <strong>üåê Timezone:</strong> ${tz}<br>
        <strong>üïê Local Time:</strong> ${localTime}
      `;
    }, () => {
      document.getElementById('info').textContent = 'Location access denied';
    });
  </script>
</body>
</html>
